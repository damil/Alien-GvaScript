<html>
  <head>

    <link href="../../lib/Alien/GvaScript/lib/GvaScript.css" rel="stylesheet" type="text/css">
    <script src="../../lib/Alien/GvaScript/lib/prototype.js"></script>
    <script src="../../lib/Alien/GvaScript/lib/GvaScript.js"></script>

    <script>
      var ac1, ac2;

      function stupidChoices(prefix){
          return [ {label: "this is the <b>" + prefix + "foo</b> entry",
                    value: prefix + "foo"},
                   {label: 'this is the <em>' + prefix + 'bar</em> entry',
                    value: prefix + "bar"},
                   {label: 'this is a <span style="font-size:400%">huge</span> entry',
                    value: prefix + "huge"},

                   {label: 'and many more',
                    value: prefix + "many"},
                   {label: 'and many more',
                    value: prefix + "many"},
                   {label: 'and many more',
                    value: prefix + "many"},
                   {label: 'and many more',
                    value: prefix + "many"},
                   {label: 'and many more',
                    value: prefix + "many"},
                   {label: 'and many more',
                    value: prefix + "many"},
                   {label: 'and many more',
                    value: prefix + "many"},
                   {label: 'and many more',
                    value: prefix + "many"},
                   {label: 'and many more',
                    value: prefix + "many"},

                   {label: 'and the last one',
                    value: prefix + "last"}

      ];

      }

      var n_loop = 1000;

      var ac = [];
      var html = "";

      function setup() {  
        for (var i = 0; i < n_loop; i++) {
          ac[i] = new GvaScript.AutoCompleter(stupidChoices, {
               minimumChars: 2,
               maxHeight:170
             });
          html += "<input onfocus='ac[" + i + "].autocomplete(this)'><br>";
        }
        $('inputs').innerHTML = html;
      }

      window.onload = setup;

    </script>


  </head>

  <body>

    <h1>Autocompleter test memory leak</h1>

    <div id="inputs"></div>

  </body>
</html>
